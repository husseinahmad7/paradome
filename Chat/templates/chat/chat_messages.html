{% load humanize %}

{% if messages %}
{% for message in messages %}
<div class="box">
    <article class="media {% ifchanged message.user.id %}
    {% cycle 'is-primary is-light' 'is-info is-light'%}
    {% endifchanged %}">
      <div class="media-left">
        <figure class="image is-64x64">
            {% if message.user.profile.picture %}
            <img class="is-rounded" src="{{ message.user.profile.picture.url }}" alt="{{message.user.username}}">
            {% else %}
          <img class="is-rounded" src="https://bulma.io/images/placeholders/128x128.png" alt="Image">
          {% endif %}
        </figure>
      </div>
      <div class="media-content">
        <div class="content">
          <p>
            <strong>{{message.user.username}}</strong> <small>{{message.date|naturaltime}}</small>
            <pre>{{message.body}}</pre>
          </p>
        </div>
      </div>
    </article>
</div>
{% endfor %}
{% endif %}
<fieldset class="field">
    <legend class="label">reply</legend>
    <form action="{% url 'chat:chat-channel' channel_id %}" method="POST" enctype="multipart/form-data">
        {% csrf_token %}

        {{ form }}
        {% comment %} <div class="control">
            <textarea autofocus class="input is-medium" name="body" cols="30" rows="10" placeholder="reply"></textarea>
        </div>
        <div class="control">
            <input type="file" name="file" class="input is-small">
        </div> {% endcomment %}
        <div class="control">
            <button class="button is-primary" type="submit" >Send</button>
        </div>
    </form>
</fieldset>