{% extends "HusseinAh/base.html" %}
{% load static %}
{% block title %}
Explore Domes
{% endblock title %}
{% block style %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css">
{% endblock style %}
{% block base %}
<main>
    <div class="navbar-menu">
        <div class="navbar-start">
          <!-- navbar items -->
        </div>
      
        <div class="navbar-end">
            {% if user.is_authenticated %}
            <a class="navbar-item" href="{% url 'domes:dome-create' %}">Create dome</a>
            <a class="navbar-item" href="{% url 'users:profile'%}">Profile</a>
            <a class="navbar-item" href="{% url 'users:logout'%}">Logout</a>
            {%else%}
            <a class="navbar-item" href="{% url 'users:register'%}">Register</a>
            <a class="navbar-item" href="{% url 'users:login'%}">Login</a>
            {%endif%}
        </div>
    </div>
    <fieldset>
      <legend>filter</legend>
      <form method="get">
        {{ filter.form }}
        <input type="submit" value="filter">
      </form>

    </fieldset>
{% if Domes %}
<div class="columns is-multiline is-mobile is-centered">
    
  {% for dome in Domes %}
  <div class="column is-two-fifths">
      <div class="card">
      <div class="card-content">
        <div class="media">
            <div class="media-left">
                {% if dome.user.profile.picture %}
                <figure class="image is-48x48">
                    <img class="is-rounded" src="{{ dome.user.profile.picture.url }}" alt="{{ dome.user.username }} image">
                  </figure>
                {% else %}
                <figure class="image is-48x48">
                <img class="is-rounded" src="https://bulma.io/images/placeholders/96x96.png" alt="Placeholder image">
              </figure>
                {% endif %}
              
            </div>
            <div class="media-content">
              <p class="title is-4"><a href="{% url 'posts:user-posts' post.user.username %}">{{ post.user.username }}</a></p>
              <p class="subtitle is-6">@johnsmith</p>
            </div>
          </div>
          <div class="card-header">
            <div class="card-header-title is-centered">
                {{ dome.title }}
            </div>
        </div>
      </div>
    <div class="card-image">
        {% if dome.picture %}
        <figure class="image is-4by3">
            <img src="{{ dome.picture.url }}" alt="{{dome.title}}">
          </figure>
        {% endif %}
      
    </div>
    <div class="card-content">
        
  
      <div class="content">
          <pre>{{ dome.description|slice:":100" }}</pre>
        <br>
        <time datetime="2016-1-1">{{ dome.date }}</time>
      </div>
    </div>
    <div class="card-footer">
        <div class="card-footer-item">
            <a href="">dome.members likepost.likes|pluralize</a>
        </div>
        <div class="card-footer-item">
            <a href="" >post.comment_count commentpost.comment_count|pluralize</a>
        </div>
    </div>
  </div>
  </div>
  
{% endfor %}

</div>
{% else %}
  <p>No Domes are available.</p>
{% endif %}

{% if is_paginated %}
    <nav class="is-flex is-justify-content-center is-align-content-center" role="navigation" aria-label="pagination">
    {% if page_obj.has_previous %}
    <a class="pagination-previous" href="?page=1">first</a>
    <a class="pagination-previous" href="?page={{ page_obj.previous_page_number }}">back</a>
    {%endif%}
    {% if page_obj.has_next %}
    <a class="pagination-next" href="?page={{ page_obj.next_page_number }}">load more</a>
    {% endif %}
    </nav>
{%endif%}
</main>
{% endblock base %}